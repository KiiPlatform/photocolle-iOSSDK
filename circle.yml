machine:
  xcode:
    version: "7.0"
  environment:
    default_destination: platform=iOS Simulator,name=iPhone 6,OS=9.0
    XCODE_SCHEME: photocolle-sdk

test:
  pre:
    # Build sdk
    - make release
    # Copy sdk and docs to artifacts
    - cp target/PhotoColleSDK-iOS-*.zip $CIRCLE_ARTIFACTS
  override:
    # run small tests
    - cd photocolle-sdk; make test
    #- if [ ! -n "$DESTINATION" ]; then DESTINATION=$default_destination; fi;
    #  cd photocolle-sdk;
    #  python testScripts/xcodebuildtest.py  --destination "${DESTINATION}"

    - cp photocolle-sdk/test-results/*.xml $CIRCLE_TEST_REPORTS/
